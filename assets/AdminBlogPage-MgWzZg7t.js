import{s as z}from"./blog-B2ZfI-Ho.js";import{d as k,j as m,c as f,b as a,w as n,e as r,f as x,a as D,u as s,l as N,h as S,o as d,_ as B}from"./index-C0y5HWrl.js";const P={class:"card"},E={key:0,class:"button-text"},R={key:1,class:"button-text"},T={class:"child-flex-right pagination-container"},j=k({__name:"AdminBlogPage",setup(I){let t=m({totalPages:0,totalElements:0,pageSize:10,pageNumber:0,content:[]});const i=m(),c=m(-1),g=(e,l=10)=>{z(e-1,l).then(o=>{t.value.totalElements=o.data.data.totalElements,t.value.totalPages=o.data.data.totalPages,t.value.pageNumber=o.data.data.pageNumber+1,t.value.pageSize=o.data.data.pageSize,t.value.content.length=0,t.value.content.push(...o.data.data.content)})},b=e=>{g(e,t.value.pageSize)},h=e=>{g(t.value.pageNumber,e)},v=(e,l,o)=>{e.id===c.value?(c.value=-1,i.value.setCurrentRow(null)):(c.value=e.id,i.value.setCurrentRow(e))},_=(e,l,o,u)=>l.property==="blogTags"?e.blogTags.join(","):l.property==="createDate"?new Date(e.createdDate).toLocaleString():l.property==="lastModifiedDate"?new Date(e.lastModifiedDate).toLocaleString():o;return g(1),(e,l)=>{const o=r("el-button"),u=r("el-form-item"),p=r("el-table-column"),C=r("el-table"),y=r("el-pagination"),w=r("el-form");return d(),f("div",P,[a(w,null,{default:n(()=>[a(u,null,{default:n(()=>[i.value!=null?(d(),x(o,{key:0,type:"primary",onClick:l[0]||(l[0]=M=>s(N).push({path:`/admin/edit/blog/${c.value}`})),color:"var(--theme-background-color)"},{default:n(()=>[c.value!=-1?(d(),f("span",E,"编辑")):(d(),f("span",R,"新增"))]),_:1})):D("",!0)]),_:1}),a(u,null,{default:n(()=>[a(C,{data:s(t).content,onRowClick:v,ref_key:"blogTable",ref:i,"highlight-current-row":""},{default:n(()=>[a(p,{prop:"id",label:"ID",width:"100"}),a(p,{prop:"title",label:"标题",width:"350"}),a(p,{prop:"blogTags",formatter:_,label:"标签",width:"350"}),a(p,{prop:"createDate",formatter:_,label:"创建时间",width:"200"}),a(p,{prop:"lastModifiedDate",formatter:_,label:"更新时间",width:"200"})]),_:1},8,["data"])]),_:1}),a(u,null,{default:n(()=>[S("div",T,[a(y,{"page-sizes":[10,20,30,40,50],total:s(t).totalElements,"page-count":s(t).totalPages,"page-size":s(t).pageSize,"current-page":s(t).pageNumber,onCurrentChange:b,onSizeChange:h,layout:"total, sizes, prev, pager, next, jumper"},null,8,["total","page-count","page-size","current-page"])])]),_:1})]),_:1})])}}}),L=B(j,[["__scopeId","data-v-2d1e7811"]]);export{L as default};
